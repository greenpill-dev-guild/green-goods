# =====================================
# Green Goods Environment Configuration
# =====================================
# 
# This is the ONLY .env file for the entire monorepo.
# All packages (client, admin, contracts, indexer) use this file.
#
# Setup: cp .env.example .env
# Then edit .env with your actual values.
#

# === üîê Authentication ===
# Passkey (WebAuthn) authentication via Pimlico smart accounts
# Wallet connection via Reown AppKit for operators/admins
VITE_WALLETCONNECT_PROJECT_ID="your-walletconnect-project-id"  # Required for AppKit - Get from https://cloud.reown.com/
VITE_PIMLICO_API_KEY="your-pimlico-api-key"              # Required for passkey smart accounts - Get from https://pimlico.io
VITE_PASSKEY_RP_ID="greengoods.app"                      # Fixed RP ID for passkey auth (CRITICAL for Android - must match your production domain)

# === ‚õìÔ∏è Blockchain Network ===
VITE_CHAIN_ID="84532"                                     # Default chain: 42161=Arbitrum, 42220=Celo, 84532=Base Sepolia

# Network RPC URLs
ARBITRUM_RPC_URL="https://arb1.arbitrum.io/rpc"
BASE_SEPOLIA_RPC_URL="https://sepolia.base.org"
CELO_RPC_URL="https://forno.celo.org"
BASE_RPC_URL="https://mainnet.base.org"
SEPOLIA_RPC_URL="https://ethereum-sepolia.publicnode.com"
OPTIMISM_RPC_URL="https://mainnet.optimism.io"

# === üîë Contract Deployment & Verification ===
# Required for deploying contracts (use Foundry keystore: cast wallet import green-goods-deployer)
FOUNDRY_KEYSTORE_ACCOUNT="green-goods-deployer"          # Your Foundry keystore account name
ETHERSCAN_API_KEY="your-etherscan-v2-api-key"            # For contract verification

# Optional - Enhanced deployment error recovery
SCHEMA_DEPLOYMENT_MAX_RETRIES="3"
SCHEMA_DEPLOYMENT_SKIP_ON_FAILURE="false"

# === üìÅ File Storage (Storacha/IPFS) ===
# Storacha (formerly web3.storage) for decentralized file uploads
# Docs: https://docs.storacha.network/how-to/upload-from-ci/
#
# Setup steps:
#   1. Install CLI: npm i -g @storacha/cli
#   2. Login: storacha login <your-email>
#   3. Create space: storacha space create green-goods
#   4. Create key: storacha key create --json
#      ‚Üí Copy the "key" field (starts with "Mg...")
#   5. Get your key's DID: The output includes "did:key:z6Mk..."
#   6. Create delegation proof:
#      storacha delegation create <did:key:z6Mk...from-step-5> \
#        -c space/blob/add -c space/index/add -c filecoin/offer -c upload/add \
#        --base64
#      ‚Üí Copy the base64 output
#
VITE_STORACHA_KEY="MgCY..."                              # Base64 ed25519 private key from "storacha key create --json"
VITE_STORACHA_PROOF="mAY..."                             # Base64 UCAN delegation from "storacha delegation create"
VITE_STORACHA_GATEWAY="https://storacha.link"            # Optional: Custom IPFS gateway (default: storacha.link)

# === üîç Indexing (Envio) ===
ENVIO_API_TOKEN="your-envio-token"                       # Envio API token from https://envio.dev/app/api-tokens
VITE_ENVIO_INDEXER_URL="http://localhost:8080/v1/graphql"  # GraphQL endpoint (localhost for dev)

# === üìä Analytics & Error Tracking ===
# PostHog for analytics, error tracking, and source map uploads
# Docs: https://posthog.com/docs
#
POSTHOG_AGENT_KEY="phc_your-posthog-project-api-key"     # PostHog API key for agent analytics (from https://posthog.com)
VITE_POSTHOG_KEY="your-posthog-client-key"               # Client: PWA Analytics tracking (separate project for gardeners/operators)
VITE_POSTHOG_ADMIN_KEY="your-posthog-admin-key"          # Admin: Dashboard Analytics tracking (separate project for admins)
VITE_POSTHOG_HOST="https://app.posthog.com"              # PostHog host (use https://eu.posthog.com for EU)
VITE_POSTHOG_DEBUG="false"                               # Enable PostHog debug logging in console

# === üìç Source Maps (Local & GitHub Actions) ===
# Required for readable error stack traces in PostHog Error Tracking
# See .github/workflows/upload-sourcemaps.yml and docs/docs/developer/monitoring.md
#
# Local upload: bun run sourcemaps (or bun run sourcemaps --dry-run to test)
# CI upload: Automatic on push to main/release branches
#
# Setup:
#   1. Go to PostHog Settings > Personal API Keys
#   2. Create a key with 'error-tracking:write' scope
#
POSTHOG_CLI_TOKEN="phx_your-posthog-cli-token"             # Required: API token with error-tracking:write scope


# === üõ†Ô∏è Development Tools (Optional) ===
VITE_APP_VERSION="0.4.0"                                 # App version for error tracking (auto-set in CI from package.json)
VITE_APP_URL="https://greengoods.app"                    # Production app URL (use http://localhost:3001 for dev)
VITE_API_BASE_URL="https://api.greengoods.app"           # API base URL (use http://localhost:3000 for dev)
VITE_DESKTOP_DEV="true"                                  # Bypass PWA install prompts during development
VITE_ENABLE_SW_DEV="true"                                # Enable service worker dev mode
VITE_DEBUG_MODE="false"                                  # Allow advancing Garden submission without media and enable verbose Garden debug logs (manual testing only)

# === üåê IPFS Deployment (GitHub Actions) ===
# These are set in GitHub Secrets, not in .env - listed here for reference
# GitHub Secrets required: STORACHA_KEY, STORACHA_PROOF
# Optional GitHub Secret: PINATA_JWT (for redundant pinning)
# See .github/workflows/deploy-ipfs.yml for the deployment workflow
VITE_USE_HASH_ROUTER="false"                             # Set to "true" for IPFS builds (uses /#/path URLs instead of /path)
PINATA_JWT="your-pinata-jwt-token"                       # Optional: Pinata JWT for redundant pinning (get from https://app.pinata.cloud)

# === üóÑÔ∏è Database (Optional - if using API backend) ===
POSTGRES_URL="your-postgres-url"                         # PostgreSQL connection string
REDIS_URL="your-redis-url"                               # Redis connection string

# === ü§ñ Agent (Multi-Platform Bot) ===
# Platform-agnostic bot supporting Telegram (with Discord/WhatsApp planned)
# See packages/agent/README.md and packages/agent/.cursor/rules/deployment.mdc
TELEGRAM_BOT_TOKEN="your-telegram-bot-token"             # Get from @BotFather (https://t.me/BotFather)
ENCRYPTION_SECRET="your-64-char-base64-secret"           # REQUIRED: 64-char base64 secret for AES-256-GCM encryption
BOT_MODE="webhook"                                       # Bot mode: "polling" (dev) or "webhook" (production)
PORT="3000"                                              # HTTP server port (for webhook mode)
WEBHOOK_URL="https://agent.greengoods.app"               # Public HTTPS URL for webhooks (required for webhook mode)
TELEGRAM_WEBHOOK_SECRET="your-webhook-secret-token"      # RECOMMENDED: Secret for Telegram webhook verification
DB_PATH="data/agent.db"                                  # SQLite database path (use /data/agent.db in production with persistent volume)
ANALYTICS_ENABLED="true"                                 # Enable/disable PostHog analytics (default: true in production)
POSTHOG_HOST="https://us.i.posthog.com"                  # PostHog host URL (default: https://us.i.posthog.com)
