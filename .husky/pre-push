#!/usr/bin/env sh

echo "ðŸ” Running format check and linting before push..."

# Try bun first, fall back to npm
if command -v bun >/dev/null 2>&1; then
  bunx --bun biome format .
  bunx --bun oxlint packages/client/src packages/admin/src packages/shared/src packages/indexer/src packages/contracts/script
elif command -v npm >/dev/null 2>&1; then
  npx biome format .
  npx oxlint packages/client/src packages/admin/src packages/shared/src packages/indexer/src packages/contracts/script
else
  echo "Error: Neither bun nor npm found. Install bun: https://bun.sh"
  exit 1
fi

echo "âœ… Pre-push checks passed!"
